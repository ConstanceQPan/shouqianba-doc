# 概述

欢迎您成为收钱吧支付平台的开发者。

收钱吧支付平台提供Web API,SDK,微信公众号支付(Wap支付),WebProxy接入四种方式，供第三方开发者使用收钱吧的支付服务。

# 收钱吧是什么？
收钱吧支付平台旨在提供一站式的移动支付解决方案。收钱吧内部集成了支付宝，微信，京东，百付宝，QQ钱包等众多支付通道。
# 如何使用收钱吧支付接口？
## 1. 申请接入资格
```
 联系负责对接的收钱吧商务，沟通洽谈，建立合作关系。
```
## 2. 根据场景选择接入方式
```
  收钱吧支付平台提供Web API,SDK,微信公众号支付(Wap支付),WebProxy接入四种方式,
  对接服务商可以根据自己的需求选择其中的对接方式进行开发，选择完对应的对接方式后，
  可以联系负责对接的收钱吧商务，建立相应的对接支持群，进行技术对接。
  对接过程中对文档不理解的地方以及接入过程中遇到的技术问题，可以在讨论组提出或者发至技术支持邮箱：lihebin@wosai-inc.com
```

## 3. 使用测试参数开发
```
  对接过程中，如果需要测试接口是否调通，可以在讨论组或者发邮件获取测试需要的服务商参数和商户终端激活码，
  测试激活码和正式激活码一样，有效期是7天(这里的7天指的是激活时间，如果已经激活，跟激活码失效时间就没有关系了)
  注：一个终端只需要激活一次就够了，重复激活会报重复的错误
```
## 4. 提交服务商资料,获取[服务商平台](http://op.shouqianba.com)登录账号和密码
```
开通服务商所需要的信息如下:
    服务商名称:一般是开发者对应的公司或组织名称，如果商户自己本身自己开发软件自己使用，则可以是商户的公司名称
    联系地址:尽可能详细
    联系人姓名:服务商负责人姓名
    联系人手机号：服务商负责人姓名
    服务商固定座机号：
    服务商邮箱：
 向负责对接的收钱吧商务提供服务商信息，用来开通服务商平台，开通服务商平台后，会得到相应的登录账号和密码，
 登录服务商平台获取对接接口需要用到的服务商参数:
    vendor_sn:服务商序列号,服务商平台获取，激活接口需要使用到
    vendor_key:服务商密钥,服务商平台获取，激活接口需要用到
    appid:服务商应用ID,需要服务商开发者在服务商平台自己生成，激活接口需要用到
 
``` 
## 5.提交商户资料，获取[商户平台](http://s.shouqianba.com)登录账号和密码
```
   开通商户平台的操作是商户进行的，如果服务商发展了新的商户，需要向负责对接的收钱吧商务提交商户的入网资料。
   具体需要提交什么商户资料，需要与负责对接的收钱吧商务进行沟通。
   开通商户完成后，商户会获取相应的商户平台登录账号和密码。
   登录商户平台后，创建相应的下属门店(开通商户后，会默认存在一个跟商户同名的门店)，创建完门店后，可以去生成激活码，
   一个激活码默认有效期7天，可激活次数需要商户自己设置。
   code/激活码：在商户平台获取，携带有商户门店信息，激活接口需要使用到，用来关联服务商、商户、门店和终端，
               一个终端只需要激活一次，同一个门店下的终端可以使用一个激活码去激活。
```
## 6. 激活完成，测试交易
```
   激活完成后，测试一笔交易，根据交易的订单号去对应的商户平台里查看，是否交易正常显示在商户平台里，
   如果没有显示，请确认是否使用正确的参数去激活(根据对接经验：发现正式上线使用时，误使用测试参数交易)
```

# 收钱吧支持接入方式
## Web api对接:
   
   支付平台API是收钱吧对外提供的统一支付接口，旨在提供一站式的移动支付解决方案。
   
   收钱吧内部集成了支付宝，微信，京东，百度,qq钱包等众多支付通道。
   
   对外提供包括支付，退款，撤单，查询，预下单等功能。
   
   接入者只需要对接这几个接口，即可方便的使用多种移动支付来收款。
   
   具体对接方式请查看[web api对接文档](https://wosai.gitbooks.io/shouqianba-doc/content/zh-cn/api/apiflow.html)
   
## 收钱吧sdk对接:

   为了更好的满足客户的需求，服务广大开发者，收钱吧对外提供了基于各主流开发语言的Upay SDK（收钱吧开发者工具）。
   
   通过使用Upay SDK，商户和第三方开发者可以高效率、低成本地接入收钱吧支付业务系统，使您的业务能够快速支持各主流移动收款方式，轻松享受收钱吧专业安   全的支付服务，节省大量的开发和维护成本。
  
   SDK为开发者提供了一套完整的接入解决方案，涵盖了 终端激活、支付、退款、查询、预下单 及 撤单 一系列主要功能，并提供了 无界面模式 和 标准界面模式 两种调用模式，最大程度的降低开发者的开发和调试难度，满足不同程度的自定义需求。
   
   目前SDK已支持 iOS ，Android 及 Windows 三大平台。具体对接请看相应的[sdk对接文档](https://wosai.gitbooks.io/shouqianba-doc/content/zh-   cn/sdk/flow.html)。

## WAP支付(目前仅支持微信支付):

   顾客在支付客户端（如微信）中访问商户的商城页面，选择商品后结账，触发支付控件（如点击支付按钮），支付客户端会弹出支付控件提示用户输入支付密码，用户  输入密码后完成支付，商户页面提示交易进行中，在商户获取到支付结果后，在页面上展示支付结果和订单信息，具体对接流程请查看[wap支付对接文档](https://wosai.gitbooks.io/shouqianba-doc/content/zh-cn/api/wap2.html)
   
- **公众号WAP:**公众号支付是用户在微信中打开商户的H5页面，商户在H5页面通过调用微信支付提供的JSAPI接口调起微信支付模块完成支付。

	-- 用户在微信公众账号内进入商家公众号，打开某个主页面，完成支付

	-- 用户的好友在朋友圈、聊天窗口等分享商家页面连接，用户点击链接打开商家页面，完成支付

- **门店码WAP:**

	-- 将商户页面转换成二维码，贴在门店里，消费者扫描二维码后在各种钱包浏览器中打开页面后，输入金额并完成支付


## WebProxy对接:

   Web Proxy支持映射代理和非映射代理两种对接方式，涵盖了门店管理和终端管理两大核心业务功能，以及支付，退款，查询，预下单，撤单等核心支付功能。
   
   Web Proxy作为一个代理的网络服务，可以直接部署在商户的内部服务器上，作为商户业务系统与收钱吧支付系统交互的桥梁。

   - **映射代理:**对接方不维护自己门店终端与收钱吧门店终端的映射关系，由Web Proxy全权代理业务数据的创建和维护，并支持对接方通过提供自己的门店序列号     和终端序列号进行交易(对接方调用auto-upay-proxy接口)。该代理完成了对接方门店、终端与收钱吧门店、终端的映射，封装了请求的签名和复杂的请求时序，可     直接发起支付交易，极大减轻了对接方的开发和维护成本。

   - **非映射代理:**对接方愿意维护自己门店终端与收钱吧门店终端的映射关系，Web Proxy仅做时序和签名的封装，角色类似于SDK（对接方调用core-proxy接口和upay-proxy接口）
   
   具体请查看[webproxy对接文档](https://wosai.gitbooks.io/shouqianba-doc/content/zh-cn/proxy/)
# 收钱吧支持场景？

**B扫C:**消费者展示各种钱包内的“刷卡条码/二维码”给商户系统扫描后直接完成支付的模式。主要应用线下面对面收银的场景。

**C扫B:**商户系统按想着各种钱包对应的支付协议（输入金额）生成支付二维码，消费者再用各种钱包“扫一扫”完成支付的模式。该模式适用于PC网站支付、实体店单品或订单支付、媒体广告支付等场景。

# 收钱吧支持的渠道？
- 支付宝
- 微信
- 百付宝
- 京东钱包
- QQ钱包

